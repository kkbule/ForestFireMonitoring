(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0651c65d"],{"0985":function(e,t,i){},"1f44":function(e,t,i){"use strict";i("0985")},3152:function(e,t,i){},"3b5b":function(e,t,i){"use strict";i("3152")},a5c9:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mapBox"},[t("Map"),t("div",{staticClass:"map-tool-box"},[t("MapBusinessToolbar"),t("MapCommonToolbar")],1)],1)},n=[],s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"mapContainer"}})},o=[];const l={mars3d:{indexMap:{scene:{center:{lat:29.940219,lng:117.521582,alt:163588.5,heading:354.4,pitch:-42.3},scene3DOnly:!0,contextOptions:{requestWebgl2:!1},shadows:!1,removeDblClick:!0,sceneMode:3,showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!0,fog:!0,fxaa:!0,requestRenderMode:!0,globe:{depthTestAgainstTerrain:!1,baseColor:"#120f44",showGroundAtmosphere:!0,enableLighting:!1},cameraController:{zoomFactor:3,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableTranslate:!0,enableTilt:!0,enableZoom:!0,enableCollisionDetection:!0,minimumCollisionTerrainHeight:15e3}},token:{tianditu:g_config.tdtToken,ion:g_config.cesiumToken},control:{homeButton:!1,baseLayerPicker:!1,sceneModePicker:!1,vrButton:!1,fullscreenButton:!1,navigationHelpButton:!1,animation:!1,timeline:!1,infoBox:!1,geocoder:!1,selectionIndicator:!1,contextmenu:{hasDefault:!1},mouseDownView:!1,zoom:!1,compass:{enabled:!1},distanceLegend:!1,locationBar:{fps:!0,crs:"CGCS2000_GK_Zone_3",crsDecimal:0,template:"<div>经度:{lng}</div> <div>纬度:{lat}</div> <div class='hide700'>层级：{level}</div><div>方向：{heading}°</div> <div>俯仰角：{pitch}°</div><div class='hide700'>视高：{cameraHeight}米</div>"}},templateValues:{dataServer:"//data.mars3d.cn",gltfServerUrl:"//data.mars3d.cn/gltf"},terrain:{url:"//data.mars3d.cn/terrain",show:!0},basemaps:[{id:1,pid:10,name:"天地图影像",icon:"/img/basemaps/tdt_img.png",type:"group",layers:[{name:"底图",type:"tdt",layer:"img_d",maximumLevel:17},{name:"注记",type:"tdt",layer:"img_z",maximumLevel:17}],show:!0},{id:2,pid:10,name:"天地图电子",icon:"/img/basemaps/tdt_vec.png",type:"group",layers:[{name:"底图",type:"tdt",layer:"vec_d",maximumLevel:17},{name:"注记",type:"tdt",layer:"vec_z",maximumLevel:17}],show:!1},{id:3,pid:10,name:"天地图地形",icon:"/img/basemaps/tdt_vec.png",type:"group",layers:[{name:"底图",type:"tdt",layer:"ter_d",maximumLevel:17},{name:"注记",type:"tdt",layer:"ter_z",maximumLevel:17}],show:!1}],layers:[]},businessMap:{scene:{center:{lat:29.888342,lng:117.582315,alt:168139.3,heading:354.3,pitch:-41.1},scene3DOnly:!0,contextOptions:{requestWebgl2:!1},shadows:!1,removeDblClick:!0,sceneMode:3,showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!0,fog:!0,fxaa:!0,requestRenderMode:!0,globe:{depthTestAgainstTerrain:!1,baseColor:"#120f44",showGroundAtmosphere:!0,enableLighting:!1},cameraController:{zoomFactor:50,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableTranslate:!0,enableTilt:!0,enableZoom:!0,enableCollisionDetection:!0,minimumCollisionTerrainHeight:15e3}},token:{tianditu:g_config.tdtToken,ion:g_config.cesiumToken},control:{homeButton:!1,baseLayerPicker:!1,sceneModePicker:!1,vrButton:!1,fullscreenButton:!1,navigationHelpButton:!1,animation:!1,timeline:!1,infoBox:!1,geocoder:!1,selectionIndicator:!1,contextmenu:{hasDefault:!0},mouseDownView:!1,zoom:!1,compass:{enabled:!1},distanceLegend:!1,locationBar:!1},templateValues:{dataServer:"//data.mars3d.cn",gltfServerUrl:"//data.mars3d.cn/gltf"},terrain:{url:"//data.mars3d.cn/terrain",show:!0},basemaps:[{id:10,name:"地图底图",type:"group"},{id:2021,pid:10,name:"天地图影像",icon:"/img/basemaps/tdt_img.png",type:"group",layers:[{name:"底图",type:"tdt",layer:"img_d"},{name:"注记",type:"tdt",layer:"img_z"}],show:!0}],layers:[]}}};var c=l,r={name:"MapViewer",data(){return{}},mounted(){this.initMap()},methods:{initMap(){g_config.globalViewer=new window.mars3d.Map("mapContainer",c.mars3d.indexMap),this.mapEvents()},mapEvents(){g_config.globalViewer.on(mars3d.EventType.click,e=>{console.log(mars3d.PointTrans.cartesian2lonlat(e.cartesian,!1))},this);let e=new mars3d.thing.CameraHistory({id:"CameraHistory"});g_config.globalViewer.addThing(e);let t=new mars3d.thing.Measure({id:"measure",label:{color:"#ffffff",font_family:"楷体",font_size:20,background:!1}});g_config.globalViewer.addThing(t)}},components:{}},m=r,g=(i("3b5b"),i("2877")),u=Object(g["a"])(m,s,o,!1,null,"05ca3a79",null),d=u.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"business-tool-box"},[t("ul",[t("li",{staticClass:"pan",class:{active:"pan"==e.menuType},on:{click:function(t){return e.menuClick("pan")}}},[t("span",[e._v("平移")])]),t("li",{staticClass:"measure",class:{active:"measure"==e.menuType},on:{click:function(t){return e.menuClick("measure")}}},[t("span",[e._v("测量")])]),t("li",{staticClass:"anaysis",class:{active:"anaysis"==e.menuType},on:{click:function(t){return e.menuClick("anaysis")}}},[t("span",[e._v("分析")])]),t("li",{staticClass:"effect",class:{active:"effect"==e.menuType},on:{click:function(t){return e.menuClick("effect")}}},[t("span",[e._v("特效")])]),t("li",{staticClass:"clear",class:{active:"clear"==e.menuType},on:{click:function(t){return e.menuClick("clear")}}},[t("span",[e._v("清除")])])]),t("div",{staticClass:"slide-box"},[t("div",{staticClass:"slide-r",on:{click:function(t){return e.slideRightClick()}}}),t("div",{staticClass:"slide-l",on:{click:function(t){return e.slideLeftClick()}}})]),t("keep-alive",{attrs:{include:"AnalysisBox"}},[t(e.currentItem,{ref:e.currentItem,tag:"component",on:{closeComponent:e.closeComponent}})],1)],1)},p=[],h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar-li-box measure-box"},[t("div",[t("a",{staticClass:"icon-cl-kjmj",on:{click:e.measureHeight}},[e._v("高度差")]),t("a",{staticClass:"icon-cl-kjmj",on:{click:e.measureAngle}},[e._v("方位角")]),t("a",{staticClass:"icon-cl-tdjl",on:{click:e.measureLength}},[e._v("空间距离")]),t("a",{staticClass:"icon-cl-kjjl",on:{click:e.measureSurfaceLength}},[e._v("贴地距离")]),t("a",{staticClass:"icon-cl-tdmj",on:{click:e.measureArea}},[e._v("水平面积")]),t("a",{staticClass:"icon-cl-kjmj",on:{click:e.measureSurfaceeArea}},[e._v("贴地面积")]),t("a",{staticClass:"icon-cl-kjmj",on:{click:e.measureTriangleHeight}},[e._v("三角测量")]),t("a",{staticClass:"icon-cl-kjmj",on:{click:e.measurePoint}},[e._v("坐标测量")])])])},b=[],_={name:"MeasureBox",components:{},data(){return{}},mounted(){},methods:{measureLength(){let e=g_config.globalViewer.getThing("measure","id");e.distance({showAddText:!0,label:{type:"div",updateText:function(e,t){t.html=`<div class="marsGreenGradientPnl" >${e}</div>`},html:'<div class="marsGreenGradientPnl" ></div>',horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM}})},measureSurfaceLength(){let e=g_config.globalViewer.getThing("measure","id");e.distanceSurface({showAddText:!0,exact:!1})},measureArea(){let e=g_config.globalViewer.getThing("measure","id");e.area({})},measureSurfaceeArea(){let e=g_config.globalViewer.getThing("measure","id");e.areaSurface({style:{color:"#ffff00"},splitNum:10,exact:!1})},measureHeight(){let e=g_config.globalViewer.getThing("measure","id");e.height()},measureTriangleHeight(){let e=g_config.globalViewer.getThing("measure","id");e.heightTriangle()},measureAngle(){let e=g_config.globalViewer.getThing("measure","id");e.angle()},measurePoint(){let e=g_config.globalViewer.getThing("measure","id");e.point()},measure(e,t){switch(e){case"dis":g_config.mtInstance.distance(t);break;case"area":g_config.mtInstance.area(t);break}}}},v=_,y=Object(g["a"])(v,h,b,!1,null,null,null),C=y.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar-li-box effect-box"},[t("div",[t("a",{style:{background:1==e.type?"rgb(0 103 223 / 55%)":null},on:{click:e.openRain}},[e._v("雨天气")]),t("a",{style:{background:2==e.type?"rgb(0 103 223 / 55%)":null},on:{click:e.openFog}},[e._v("雾天气")]),t("a",{style:{background:3==e.type?"rgb(0 103 223 / 55%)":null},on:{click:e.openSnow}},[e._v("雪天气")])])])},k=[],x={name:"MeasureBox",components:{},data(){return{type:0}},mounted(){},methods:{openRain(){if(this.cancleAllEffect(),1==this.type)this.type=0,this.utils.opeNotify("","top-center","已关闭雨天气！","3500","info");else{let e=null;this.utils.opeNotify("","top-center","已开启雨天气！","3500","info"),g_config.globalViewer.scene.skyAtmosphere.hueShift=-.8,g_config.globalViewer.scene.skyAtmosphere.saturationShift=-.7,g_config.globalViewer.scene.skyAtmosphere.brightnessShift=-.33,g_config.globalViewer.scene.fog.density=.001,g_config.globalViewer.scene.fog.minimumBrightness=.8,e=new mars3d.effect.RainEffect({id:"rainEffect",speed:10,size:20,direction:-30}),g_config.globalViewer.addEffect(e),this.type=1}},openFog(){if(this.cancleAllEffect(),2==this.type)this.type=0,this.utils.opeNotify("","top-center","已关闭雾天气！","3500","info");else{let e=null;const t=g_config.globalViewer.camera.position,i=Cesium.Cartographic.fromCartesian(t).height;if(i>2e4)return this.utils.opeNotify("","top-center","请在高度20000米以下开启！","3500","error"),void(this.type=0);this.utils.opeNotify("","top-center","已开启雾天气！","3500","info"),e=new mars3d.effect.FogEffect({maxHeight:2e4,fogByDistance:new Cesium.Cartesian4(1e3,0,3e4,.9),color:Cesium.Color.WHITE}),g_config.globalViewer.addEffect(e),this.type=2}},openSnow(){if(this.cancleAllEffect(),3==this.type)this.type=0,this.utils.opeNotify("","top-center","已关闭雪天气！","3500","info");else{const e=g_config.globalViewer.camera.position;Cesium.Cartographic.fromCartesian(e).height;let t=null;this.utils.opeNotify("","top-center","已开启雪天气！","3500","info"),t=new mars3d.effect.SnowEffect({speed:20}),g_config.globalViewer.addEffect(t),this.type=3}},cancleAllEffect(){if(g_config.globalViewer.getEffect("rain","type")){g_config.globalViewer.scene.skyAtmosphere.hueShift=0,g_config.globalViewer.scene.skyAtmosphere.saturationShift=0,g_config.globalViewer.scene.skyAtmosphere.brightnessShift=0,g_config.globalViewer.scene.fog.density=2e-4,g_config.globalViewer.scene.fog.minimumBrightness=.03;let e=g_config.globalViewer.getEffect("rain","type");g_config.globalViewer.removeEffect(e,!0)}if(g_config.globalViewer.getEffect("fog","type")){let e=g_config.globalViewer.getEffect("fog","type");g_config.globalViewer.removeEffect(e,!0)}if(g_config.globalViewer.getEffect("snow","type")){let e=g_config.globalViewer.getEffect("snow","type");g_config.globalViewer.removeEffect(e,!0)}}}},T=x,V=Object(g["a"])(T,w,k,!1,null,null,null),B=V.exports,M={name:"MapBusinessToolbar",components:{MeasureBox:C,EffectBox:B},data:function(){return{analysisflag:!1,currentItem:"",menuType:"",handler:null,autoWidth:0}},mounted(){this.autoWidth=$(".business-tool-box ul").width()+2},methods:{closeComponent(){this.menuType="",this.currentItem=""},slideLeftClick(){$(".business-tool-box .slide-r").css("display","block"),$(".business-tool-box .slide-l").css("display","none"),$(".business-tool-box ul").animate({width:this.autoWidth,opacity:1},500)},slideRightClick(){$(".business-tool-box .slide-r").css("display","none"),$(".business-tool-box .slide-l").css("display","block"),$(".business-tool-box ul").animate({width:0,opacity:0},500)},menuClick(e){"region"==e?this.menuType==e?(this.menuType="",this.currentItem=""):(this.menuType=e,this.currentItem=e+"Box"):"clear"==e?g_config.globalViewer.getThing("measure","id").clear():"zb"==e||"pan"==e||(this.menuType==e?(this.menuType="",this.currentItem=""):(this.menuType=e,this.currentItem=e+"Box"))}}},E=M,S=Object(g["a"])(E,f,p,!1,null,"7bef1a40",null),A=S.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"common-tool-box"},[t("ul",[t("li",{staticClass:"chus",attrs:{title:"初始视角"},on:{click:function(t){return e.rightToolFn("chus")}}}),t("li",{staticClass:"zhib",attrs:{title:"指北"},on:{click:function(t){return e.rightToolFn("zhib")}}}),t("li",{staticClass:"fangd",attrs:{title:"放大"},on:{click:function(t){return e.rightToolFn("fangd")}}}),t("li",{staticClass:"suox",attrs:{title:"缩小"},on:{click:function(t){return e.rightToolFn("suox")}}}),t("li",{class:[1==e.yx?"dt_img":2==e.yx?"dt_vec":"dt_ter"],attrs:{title:"底图切换"},on:{click:function(t){return e.rightToolFn("dt")}}}),t("li",{staticClass:"quanp",attrs:{title:"全屏"},on:{click:function(t){return e.rightToolFn("quanp")}}}),t("li",{staticClass:"shang",attrs:{title:"上一视图"},on:{click:function(t){return e.rightToolFn("last")}}}),t("li",{staticClass:"xia",attrs:{title:"下一视图"},on:{click:function(t){return e.rightToolFn("next")}}})]),t("div",{staticClass:"slide-box"},[t("div",{staticClass:"slide-d",attrs:{title:"收缩"},on:{click:function(t){return e.slideDownClick()}}}),t("div",{staticClass:"slide-u",attrs:{title:"展开"},on:{click:function(t){return e.slideUpClick()}}})]),t("transition",{attrs:{name:"el-zoom-in-top"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.basemaps_container_flag,expression:"basemaps_container_flag ==true"}],staticClass:"basemaps-container"},[t("div",[t("div",{staticClass:"title"},[e._v("影像")]),t("div",{staticClass:"content"},[t("div",{class:[1==e.yx?"item active":"item"],on:{click:function(t){return e.changeBasemap(1)}}},[t("div",{staticClass:"img_box"},[t("img",{staticClass:"person_icon",attrs:{src:"Map/img/basemaps/tdt_img.png"}})]),t("div",{staticClass:"label"},[e._v("天地图影像")])]),t("div",{class:[2==e.yx?"item active":"item"],on:{click:function(t){return e.changeBasemap(2)}}},[t("div",{staticClass:"img_box"},[t("img",{staticClass:"person_icon",attrs:{src:"Map/img/basemaps/tdt_vec.png"}})]),t("div",{staticClass:"label"},[e._v("天地图电子")])]),t("div",{class:[3==e.yx?"item active":"item"],on:{click:function(t){return e.changeBasemap(3)}}},[t("div",{staticClass:"img_box"},[t("img",{staticClass:"person_icon",attrs:{src:"Map/img/basemaps/tdt_ter.png"}})]),t("div",{staticClass:"label"},[e._v("天地图地形")])])])]),t("div",[t("div",{staticClass:"title"},[e._v("地形服务")]),t("div",{staticClass:"content"},[t("div",{class:[1==e.dx?"item active":"item"],on:{click:function(t){return e.enabledTerrain(1)}}},[t("div",{staticClass:"img_box"},[t("img",{staticClass:"person_icon",attrs:{src:"Map/img/basemaps/Ellipsoid.png"}})]),t("div",{staticClass:"label"},[e._v("无地形")])]),t("div",{class:[2==e.dx?"item active":"item"]},[t("div",{staticClass:"img_box"},[t("img",{staticClass:"person_icon",attrs:{src:"Map/img/basemaps/CesiumWorldTerrain.png"},on:{click:function(t){return e.enabledTerrain(2)}}})]),t("div",{staticClass:"label"},[e._v("有地形")])])])])])])],1)},z=[],j={name:"RightToolbar",components:{},data:function(){return{yx:1,dx:2,autoHeight:0,basemaps_container_flag:!1}},mounted(){this.autoHeight=$(".common-tool-box ul").height()+2},methods:{rightToolFn(e){switch(e){case"quanp":{let e=document.getElementsByClassName("mapBox")[0];document.fullscreenElement?document.exitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen&&e.mozRequestFullScreen();break}case"zhib":{const e=g_config.globalViewer.getCameraView();e.heading=0,g_config.globalViewer.setCameraView(e);break}case"fangd":g_config.globalViewer.zoomIn();break;case"suox":g_config.globalViewer.zoomOut();break;case"dt":this.basemaps_container_flag=!this.basemaps_container_flag;break;case"chus":g_config.globalViewer.flyHome();break;case"last":{let e=g_config.globalViewer.getThing("CameraHistory","id");e.goLast();break}case"next":{let e=g_config.globalViewer.getThing("CameraHistory","id");e.goNext();break}}},slideUpClick(){$(".common-tool-box .slide-d").css("display","block"),$(".common-tool-box .slide-u").css("display","none"),$(".common-tool-box ul").animate({height:this.autoHeight,opacity:1},500)},slideDownClick(){$(".common-tool-box .slide-d").css("display","none"),$(".common-tool-box .slide-u").css("display","block"),$(".common-tool-box ul").animate({height:0,opacity:0},500),this.basemaps_container_flag=!1},changeBasemap(e){this.yx=e,g_config.globalViewer.basemap=e},enabledTerrain(e){this.dx=e,g_config.globalViewer.hasTerrain=1==e?void 0:1}}},H=j,L=(i("f8ea"),Object(g["a"])(H,F,z,!1,null,"3b8d5806",null)),D=L.exports,O={name:"index-map",data(){return{}},mounted(){},methods:{},components:{Map:d,MapBusinessToolbar:A,MapCommonToolbar:D}},R=O,q=(i("1f44"),Object(g["a"])(R,a,n,!1,null,"4201470f",null));t["a"]=q.exports},b501:function(e,t,i){},f8ea:function(e,t,i){"use strict";i("b501")}}]);