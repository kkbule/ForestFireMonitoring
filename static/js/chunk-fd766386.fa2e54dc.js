(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd766386"],{"3fc3":function(e,t,a){e.exports=a.p+"static/img/export-setting-topbtn-xzqhopen.4bcb24b2.png"},"403d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAApCAYAAAAoEzflAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFQjYxRUZDNUIyOTExRUQ5OUNDRjc3NkZGQjFEMUNCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFQjYxRUZENUIyOTExRUQ5OUNDRjc3NkZGQjFEMUNCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUVCNjFFRkE1QjI5MTFFRDk5Q0NGNzc2RkZCMUQxQ0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUVCNjFFRkI1QjI5MTFFRDk5Q0NGNzc2RkZCMUQxQ0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6hBP1MAAAKNklEQVR42uxbCWxU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"},"535b":function(e,t,a){"use strict";a("f9e5")},5714:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAQVJREFUOE9j/L9/P8sfKaZmRgaGFAZGRhEGcsD//2/+MzDMYXn2r5bx783D7f8Z/1eQYw66Hsb/jB2Mf24dfM3AQKbLMFzx/w3jn1uH/lPDdTAzMAz8d2c2w/9P1xiYlFIYGAW0sdr1/8NVhn/35jAw8mkxMKmkoqjBMPDvHjviHczExsDstAe/gWAXPljMwGQyHb8Lz2QyMCrEEnYhyDqQK5ldDuF1KS41WCNl1ECsYTlwYQhONvcXMzCZEkg2pzMZGBWJSDa0SdjUzHrE5zvsKkEJ+zUDAwN5BSummW8Y/94+3P7/P5UKWEbGDkZQFfBPhqX5////KRS49A0jI+Mcpid/agEfBrugjOdGeQAAAABJRU5ErkJggg=="},"5eaf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAQBJREFUOE9jZEAD62WVA5iYmNeji4P4//79DQx8fHcDshwjusIGBgYWfQkFGWwGXHzx4EkDA8MfFAM2yKmuZmBkEMGmgaDYf4Y3jBvkVEIYGBhNGBkZywlqQFLw////TgaG/2fAXlgvo+LAxMy0Hyb/////KyA2IyOjDohG54PD4+8/x8Andw5gN4DhXyrYAAam2WAD0PgEDfj3738iSBETE+N8SOij8kcNgMQV3lgY+ED8z/B/BcN/BhZGRsYQSDpA5WN4Ya20igwLM9N9BkYGFqKS83+GP3/+/lMMfnrnCTw3bpRTi//P8L+FkZERa05ESuZPGBkYa/wf3VoIEgMAMNTL9TjhZ10AAAAASUVORK5CYII="},"71ca":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAIAAAAnX375AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkY3MDE0RjBEM0Q3RTExRUQ5MzIwQUE5QUY5RDMyRDE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkY3MDE0RjBFM0Q3RTExRUQ5MzIwQUE5QUY5RDMyRDE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjcwMTRGMEIzRDdFMTFFRDkzMjBBQTlBRjlEMzJEMTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjcwMTRGMEMzRDdFMTFFRDkzMjBBQTlBRjlEMzJEMTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WemifAAABc0lEQVR42uyYMU4DMRBFxyMhRENHRUGK0HABIlEAd6DjCnAECuAsdNyBKhJwBQpCS6hSgBCFGWtX0bK2x9+DgoS0o5WlOPv2eR3bY8d57ykVs3koR1tkiALrUzGb+50zPzr3z6++Noosx414eaPDy1BKY4+v2yaDgbCcY5ZdhFtBlhWmyoqzrDOgtYrlIlO01rKMMIrVwDoZ0wizDJltdxftnAN9PZZlJXCObGFjudvqqleMP4Is42TyNgPLIKncUMvyKh6qf8W2rlt8hMvGsmGALN7p9iFcujX36i6ZL5uZK5H2PbayzQ062Q8lyGrKXJrt+prIWZUUnVXG8flFN9N+ZzbW0wNaX4OXAnzVkIfubSfqpRL3aUrpnDhvTHZpMv5ZMw6VCFtQykp9dJXOVl1r0qew2d+ymx9yA/3+qdUb2L4yzkf42g2yw95n2PsMe59h7/Ov9j6/6XZexQApsMmztZy55eRtO7gXWff3f098CzAADzppcFdDzPwAAAAASUVORK5CYII="},"75c4":function(e,t,a){e.exports=a.p+"static/img/export-setting-topbtn-drzbclose.927cc192.png"},"7cbe":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAfNJREFUOE99kk9IFHEUx7/vt6vu/lxETykUrNBBoUOBkrueAr0VGKw7rXTZQ9SxY9GhPXSoU8cIgu0g5aSgYLe61Y7KKgoSGQQJCRoEa+XOrMvsvJjRmX6zrb7be+/7Pr/350dosmTxW6wvfuY2gW8S0YCbZuYtBk3vWj+eb+f7a2oJqU7q1e8BEtF5IniFzcaMLRJiopSNffFzAeBisdItZcc6AclWxX6Mga+meTi8ke/Zd2MBYFQ3nwK4qxYzY9UTEYZCUMbj0g15vxmwC6DXFzrg60ta54Lrp/TqhADNK13sGJo8FwCGiwe97VK4gGPj9yWtc1x9dVSvvgNozI/VTaevnE/seSNcnjbPRtvwXXlhztDkpApI6+YsARk/1nCofzkX31Z2UK0A1O0JGLV6NDJUznR8ct30zJ8LhEgZhNgx4KD0Od6DAtkBIKVbzwT4zr8pUGPCnDcnI6MUg0EvDC1+K7TE1Jtf54XTtqkKW5+T9+vEg+VsYi8EOGrVekDEj079B46TN3KJl74m9BNR4Gh60PpAwEgrCBPeGll5Tc2FAQBGXleSEdG+HizUPyywc9iwL61Ndf08FeB9nJnqVUG0qAhtu2FfWZnq+tjc2X8d+IK0bj0kcOHoqrhnaPJJq7FOBHhL1c1ZALahydxJi/0L7HOmEfI9lCYAAAAASUVORK5CYII="},"94bb":function(e,t,a){"use strict";a("eceb")},a093:function(e,t,a){e.exports=a.p+"static/img/export-setting-topbtn-xzqhclose.71454943.png"},a2d8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAWlJREFUOE/VlbFLAlEcx7+/664iMTtTcougaDGMprYoqKE1qJa2oJaGoMEGi3Cw/oEmEcFdojHIg6AGB0mN1oIWJT3DK/S03os7KFC6wcvFN7/vh+/3/XjfHymKIrKAHCZgGyAPbB1e4kBUyFZCdK3mIgQetMVpE3HQKaXU+1f7ztpt8BKl1CzvhrsfRo8D31gNyY888o2CmWhK8mDNMYOxPqflK1lGNmBHlStUWb1FPEQSjuVlS6glMKalcVN/wqTowZZzDoMkIqFl8NAswN/vw4Fr4U+XlsD98iUqrIYTeQXjomyKNaZjr3wBAYSYd90e8My9+huvzpvYLSVNUNy70RnwvHqHtP4Cv+TDzvA8JBLMyLf6M6YlLw5HljoDFr80cyg6/2wRDpCIoGsRE5K7M6Bx24Am3jN4bBTBwE1nm45ZS5ih6fGfYqc0ul9fipqL8C4VLBkFa6wABEbDHOxfK4AgRJEth74BiRGyN1yf+yEAAAAASUVORK5CYII="},ae85:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"right-comp-wrapper"},[t("div",{staticClass:"export-setting"},[t("div",{staticClass:"export-setting-title"},[t("img",{attrs:{src:a("71ca"),alt:""}}),t("p",[e._v(e._s(e.propData.smName)+" "),t("el-link",{staticClass:"el-icon-close",on:{click:e.closeBox}})],1)]),t("div",{staticClass:"export-setting-topbtn"},[t("div",{staticClass:"hzfw"},[t("img",{directives:[{name:"show",rawName:"v-show",value:!e.openhzfw,expression:"!openhzfw"}],attrs:{src:a("aedf"),alt:""},on:{click:e.openHzfw}}),t("img",{directives:[{name:"show",rawName:"v-show",value:e.openhzfw,expression:"openhzfw"}],attrs:{src:a("403d"),alt:""},on:{click:e.openHzfw}}),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.openhzfw,expression:"openhzfw"}],staticClass:"hzfw-option"},[t("div",{staticClass:"hzfw-option-list",attrs:{tabindex:"1"},on:{click:e.drawPolygonGV}},[t("img",{attrs:{src:a("5714"),alt:""}}),e._v("绘制面 ")]),t("div",{staticClass:"hzfw-option-list",attrs:{tabindex:"1"},on:{click:e.drawLineGV}},[t("img",{attrs:{src:a("beea"),alt:""}}),e._v("绘制线 ")]),t("div",{staticClass:"hzfw-option-list",attrs:{tabindex:"1"},on:{click:e.drawPointGV}},[t("img",{attrs:{src:a("a2d8"),alt:""}}),e._v("绘制点 ")])])])],1),t("div",[t("el-upload",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".shp","on-change":e.handleChange,"show-file-list":!1,"http-request":e.uploadFile}},[t("div",{staticClass:"upload-box"},[t("img",{attrs:{src:a("75c4"),alt:""}})])])],1),t("div",{on:{click:e.openXzqh}},[t("img",{directives:[{name:"show",rawName:"v-show",value:!e.openxzqh,expression:"!openxzqh"}],attrs:{src:a("a093"),alt:""}}),t("img",{directives:[{name:"show",rawName:"v-show",value:e.openxzqh,expression:"openxzqh"}],attrs:{src:a("3fc3"),alt:""}})])]),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.openxzqh,expression:"openxzqh"}],staticClass:"xzqh"},[t("div",{staticClass:"xzqh-select-list"},[t("span",[e._v("县区")]),t("el-select",{attrs:{placeholder:"已选中的选项"},on:{change:e.xianChange},model:{value:e.xian,callback:function(t){e.xian=t},expression:"xian"}},e._l(e.xianoptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.xianmc,value:e.code}})})),1)],1),t("div",{staticClass:"xzqh-select-list"},[t("span",[e._v("乡镇")]),t("el-select",{attrs:{placeholder:"已选中的选项"},on:{change:e.xiangChange},model:{value:e.xiang,callback:function(t){e.xiang=t},expression:"xiang"}},e._l(e.xiangoptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),t("div",{staticClass:"xzqh-select-list"},[t("span",[e._v("村")]),t("el-select",{attrs:{placeholder:"已选中的选项"},on:{change:e.cunChange},model:{value:e.cun,callback:function(t){e.cun=t},expression:"cun"}},e._l(e.cunoptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),t("div",{staticClass:"xzqh-select-btn"},[t("el-button",{attrs:{plain:"",icon:"el-icon-refresh-right"},on:{click:e.resetXzqh}},[e._v("重置")]),t("el-button",{attrs:{plain:""},on:{click:e.closeXzqh}},[e._v("关闭")])],1)])]),t("div",{staticClass:"export-setting-content"},[e._m(0),t("div",{staticClass:"export-setting-content-data"},[e._v("缓冲距离 "),t("el-input",{attrs:{placeholder:"请输入"},on:{blur:e.judgeBufferDis},model:{value:e.bufferDis,callback:function(t){e.bufferDis=t},expression:"bufferDis"}}),e._v(" 米 ")],1),"image"!=e.propData.dpType?t("div",{staticClass:"title"},[t("p",[e._v("空间关系")])]):e._e(),"image"!=e.propData.dpType?t("div",{staticClass:"export-setting-content-radio"},[t("el-radio",{attrs:{label:"1"},model:{value:e.sp_radio,callback:function(t){e.sp_radio=t},expression:"sp_radio"}},[e._v("相交")]),t("el-radio",{attrs:{label:"2"},model:{value:e.sp_radio,callback:function(t){e.sp_radio=t},expression:"sp_radio"}},[e._v("包含")])],1):e._e()]),t("div",{staticClass:"export-setting-content-form"},[t("div",{staticClass:"content-form-title"},[t("div",[e._v("共"),t("span",{staticStyle:{color:"#0052D9","font-weight":"bold"}},[e._v(e._s(e.drawDataList.length))]),e._v("条,总面积"+e._s(e.sumArea)+"公顷")]),t("img",{attrs:{src:a("5eaf"),alt:""},on:{click:e.removeEntities}})]),t("div",{staticClass:"form-box"},[t("div",{staticClass:"form-box-list"},[t("el-checkbox",{on:{change:e.checkAll},model:{value:e.checkAllF,callback:function(t){e.checkAllF=t},expression:"checkAllF"}}),t("div",{staticStyle:{width:"22%","margin-left":"10px"}},[e._v("名称")]),t("div",{staticStyle:{width:"50%"}},[e._v("面积（公顷）")])],1),e._l(e.drawDataList,(function(i,s){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.drawDataList.length>0,expression:"drawDataList.length>0"}],key:s,staticClass:"form-box-list"},[t("div",[t("el-checkbox",{attrs:{value:e.checkedIds.includes(i.id)},on:{change:t=>e.handleCheckedCitiesChange(t,i.id)}},[e._v(e._s(i.name)+" ")])],1),t("div",[e._v(e._s(i.area))]),t("div",{on:{click:function(t){return e.dingweiEntity(i.id)}}},[t("img",{attrs:{src:a("7cbe"),alt:""}})])])}))],2),t("ExportLayerDialog",{ref:"exportDia",attrs:{queryResult:e.queryResult,exportOption:e.exportOption}})],1)],1),t("div",{staticClass:"form-box-btn"},["image"!=e.propData.dpType?t("el-button",{staticClass:"confirm",attrs:{plain:""},on:{click:e.queryFeatures}},[e._v("查询")]):t("el-button",{staticClass:"confirm",attrs:{plain:""},on:{click:e.showImgDia}},[e._v("查询")]),t("el-button",{staticClass:"close",attrs:{plain:""},on:{click:e.closeBox}},[e._v("关闭")])],1),t("el-dialog",{staticClass:"custom-dialog download-layer",attrs:{title:e.imgInfo.name,width:"30%",visible:e.dialogVisible,"append-to-body":!0},on:{close:e.handleClose}},[t("div",[t("div",{staticClass:"download-layer-center"},[t("div",{staticClass:"download-layer-detail"},[t("p",{staticClass:"download-layer-list"},[e._v("文件格式:"),t("span",[e._v(e._s(e.imgInfo.smMimeType))])]),t("p",{staticClass:"download-layer-list"},[e._v("下载范围:"),t("span",[e._v(e._s(e.imgInfo.fanw)+"公顷")])]),t("p",{staticClass:"download-layer-list"},[e._v("数据大小:"),t("span",[e._v(e._s(e.imgInfo.shuj)+" M")])]),t("p",{staticClass:"download-layer-list"},[e._v("空间分辨率:"),t("span",[e._v(e._s(e.imgInfo.fenbianlv))])]),t("p",{staticClass:"download-layer-list"},[e._v("数据时间:"),t("span",[e._v(e._s(e.imgInfo.shujDate))])]),t("p",{staticClass:"download-layer-list"},[e._v("空间参考:"),t("span",[e._v(e._s(e.imgInfo.kongjiancank))])])])]),t("div",{staticClass:"footer-btn"},[t("el-button",{staticClass:"e-btn-blue",attrs:{size:"small"},on:{click:e.exportImg}},[e._v("导出")]),t("el-button",{staticClass:"e-btn-grey",attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])])],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title"},[t("p",[e._v("缓冲区")])])}],o=(a("14d9"),function(){var e=this,t=e._self._c;return e.dialogVisible?t("el-dialog",{staticClass:"custom-dialog export-layer",attrs:{title:e.queryResult.name,visible:e.dialogVisible,"append-to-body":!0,"close-on-click-modal":!1,"v-model":e.queryResult},on:{opened:e.initMap,close:e.closeDia}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("div",{staticClass:"export-layer-center"},[t("div",{staticClass:"export-layer-span"},[t("span",{staticClass:"export-layer-span-1"},[e._v("空间参考：")]),t("span",{staticClass:"export-layer-span-2"},[e._v(e._s(e.queryResult.spatial))]),t("span",{staticClass:"export-layer-span-1"},[e._v("要素数量：")]),t("span",{staticClass:"export-layer-span-2"},[e._v(e._s(e.queryResult.featuresCount)+"个")]),t("span",{staticClass:"export-layer-span-1"},[e._v("总面积：")]),t("span",{staticClass:"export-layer-span-2"},[e._v(e._s(e.queryResult.areaCount)+"公顷")])]),t("div",{staticClass:"export-layer-table"},[e.tableF?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"list-table",attrs:{"row-style":e.changeRowStyle,height:"200px",data:e.queryResult.tableData,border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center","class-name":"etc-width"}}),e._l(e.head,(function(a,i){return t("el-table-column",{key:i,attrs:{prop:a.englishName,label:a.pfAlias,align:"center","min-width":"10%","render-header":e.renderHeader,"show-overflow-tooltip":""}})})),t("el-table-column",{attrs:{label:"操作",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"et-btn-blue el-icon-position",on:{click:function(t){return e.locationGeo(a.row)}}},[e._v("定位")])]}}],null,!1,1507537067)})],2):e._e(),t("div",{staticClass:"block pagination-wrapper",staticStyle:{"text-align":"center"}},[t("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"prev, pager, next",total:e.page.total,"page-size":e.page.pageSize,"current-page":e.page.pageNum},on:{"current-change":e.changePage}})],1),t("span",{staticClass:"export-layer-span-3"},[e._v(" 导出类型 "),t("el-radio-group",{model:{value:e.queryResult.exportLayerType,callback:function(t){e.$set(e.queryResult,"exportLayerType",t)},expression:"queryResult.exportLayerType"}},[t("el-radio",{attrs:{label:0}},[e._v("Esri shape")]),t("el-radio",{attrs:{label:1}},[e._v("Geojson")])],1)],1)],1),t("div",{attrs:{id:"export-map"}})]),t("div",{staticClass:"form-btn-wrapper"},[t("el-button",{staticClass:"e-btn-blue",attrs:{size:"small"},on:{click:e.mapExport}},[e._v("导出")]),t("el-button",{staticClass:"e-btn-grey",attrs:{size:"small"},on:{click:e.closeDia}},[e._v("取消")])],1)])]):e._e()}),r=[],n=a("bab2"),l=a("e006"),c={name:"exportLayer-dialog",props:{queryResult:{type:Object,default:()=>({})},exportOption:{type:Object,default:()=>({})}},data(){return{map:null,dialogVisible:!1,tableF:!1,tableLoading:!1,head:[{englishName:"",pfAlias:""}],vectoryLayer:null,selectClick:null,selectPointerMove:null,selectId:"",loading:!1,page:{pageNum:1,pageSize:4,total:0}}},created(){},mounted(){},methods:{loadData(){n["a"].calcIntersectCount({datauuid:this.exportOption.dpId,epsg:this.exportOption.wktEpsg,wktStr:this.exportOption.wktList[0]}).then(e=>{"success"==e.data.status&&(this.queryResult.featuresCount=e.data.result,this.page.total=e.data.result)}),n["a"].calcIntersectArea({datauuid:this.exportOption.dpId,epsg:this.exportOption.wktEpsg,wktStr:this.exportOption.wktList[0]}).then(e=>{"success"==e.data.status&&(this.queryResult.areaCount=(parseFloat(e.data.result)/1e4).toFixed(2))}),console.log(this.queryResult),l["a"].getVectorAnalyse({dpId:this.queryResult.id}).then(e=>{let t=e.data.result,a=e.data.status;if(200==a&&t){let e=[];for(var i in this.queryResult.tableData[0])if("objectid"!=i){let a=t.dmPropertyFieldList.find(e=>e.englishName==i);a&&e.push({pfAlias:a.pfAlias,englishName:a.englishName})}this.head=e,this.tableF=!0}})},handleClose(){},show(){this.dialogVisible=!0},initMap(){this.loadData();let e=(new GeoJSON).readFeatures(this.queryResult.geojsonList);e.forEach((e,t,a)=>{e.setId(this.queryResult.tableData[t].objectid)}),createMap("export-map").then(t=>{this.map=t,this.vectoryLayer=new VectorLayer({source:new VectorSource({features:e}),style:new Style({fill:new Fill({color:"rgba(0,0,0,0)"}),stroke:new Stroke({color:"#2364DB",width:1})})}),this.map.addLayer(this.vectoryLayer),this.map.getView().fit(this.vectoryLayer.getSource().getExtent()),this.mapEvents()})},mapEvents(){this.selectClick=new Select({condition:click,layers:[this.vectoryLayer],style:new Style({fill:new Fill({color:"rgba(229,255,255,0.2)"}),stroke:new Stroke({color:"rgba(0,255,255, 1)",width:2})})}),this.selectClick.on("select",e=>{e.selected.length>0?this.selectId=e.selected[0].getId():this.selectId=""}),this.selectPointerMove=new Select({condition:pointerMove,layers:[this.vectoryLayer],style:new Style({fill:new Fill({color:"rgba(229,255,255,0.2)"}),stroke:new Stroke({color:"rgba(165,246,246,0.65)",width:2})})}),this.map.addInteraction(this.selectClick),this.map.addInteraction(this.selectPointerMove)},deleteRow(e,t){let a=this.vectoryLayer.getSource().getFeatureById(t[e].objectid);this.vectoryLayer.getSource().removeFeature(a),t.splice(e,1)},locationGeo(e){let t=this.vectoryLayer.getSource().getFeatureById(e.objectid);this.selectId=e.objectid,OL_CommonTools.postionsFeature(this.map,t),this.selectClick.getFeatures().clear(),this.selectClick.getFeatures().push(t),this.selectClick.dispatchEvent({type:"select",selected:[t]})},changeRowStyle({row:e}){return e.objectid==this.selectId?{"background-color":"rgb(128, 191, 255, 0.5)"}:""},closeDia(){this.map=null,this.dialogVisible=!1,Object.assign(this.$data,this.$options.data())},mapExport(){0==this.queryResult.exportLayerType?this.exportOption.type="shap":this.exportOption.type="json",this.loading=!0,console.log(this.exportOption),n["a"].vectorCrop(this.exportOption).then(e=>{console.log(e),200==e.data.status?(this.loading=!1,this.utils.opeNotify("","top-center","正在导出中,可至任务日志查看详情！","3500","info"),setTimeout(()=>{this.closeDia()},1e3)):(this.loading=!1,this.utils.opeNotify("","top-center","导出失败！！","2500","error"),console.error(e.data))})},renderHeader(e,{column:t,$index:a}){let i=document.createElement("span");return i.innerText=t.label,document.body.appendChild(i),t.minWidth=i.getBoundingClientRect().width+30,document.body.removeChild(i),e("span",t.label)},changePage(e){this.page.pageNum=e,this.queryData()},queryData(){if(this.tableLoading=!0,"intersection"==this.exportOption.analyseType){let e={datauuid:this.exportOption.dpId,epsg:this.exportOption.wktEpsg,wktStr:this.exportOption.wktList[0],pageNum:this.page.pageNum,pageSize:this.page.pageSize};n["a"].intersect(e).then(e=>{if(console.log(e),200==e.status){let t=JSON.parse(e.data.result);if(t){this.queryResult.tableData=[],t.features.forEach(e=>{this.queryResult.tableData.push(e.properties)}),this.queryResult.geojsonList=t;let e=(new GeoJSON).readFeatures(this.queryResult.geojsonList);e.forEach((e,t,a)=>{e.setId(this.queryResult.tableData[t].objectid)});let a=new VectorSource({features:e});this.vectoryLayer.setSource(a),OL_CommonTools.postionsFeature(this.map,e[0]),this.tableLoading=!1}else this.tableLoading=!1}})}else{let e={datauuid:this.exportOption.dpId,epsg:this.exportOption.wktEpsg,wktStr:this.exportOption.wktList[0],pageNum:this.page.pageNum,pageSize:this.page.pageSize};n["a"].include(e).then(e=>{if(console.log(e),200==e.status){let t=JSON.parse(e.data.result);if(t){this.queryResult.tableData=[],t.features.forEach(e=>{this.queryResult.tableData.push(e.properties)}),this.queryResult.geojsonList=t;let e=(new GeoJSON).readFeatures(this.queryResult.geojsonList);e.forEach((e,t,a)=>{e.setId(this.queryResult.tableData[t].objectid)});let a=new VectorSource({features:e});this.vectoryLayer.setSource(a),OL_CommonTools.postionsFeature(this.map,e[0]),this.tableLoading=!1}else this.tableLoading=!1}})}}},components:{}},d=c,p=a("2877"),h=Object(p["a"])(d,o,r,!1,null,"7d359608",null),g=h.exports,u={name:"ExportSetting",props:["propData"],data(){return{dialogVisible:!1,fullscreenLoading:!1,value:"",sp_radio:"1",queryResult:{id:"",name:"",spatial:"",featuresCount:"",areaCount:0,tableData:[],geojsonList:[],exportLayerType:0},exportOption:{dpId:"",type:"",wktList:[],bufferSize:0,param:"1=1",analyseType:"",wktEpsg:""},loading:!1,shpWkt:"",openhzfw:!1,openxzqh:!0,xian:null,xiang:null,cun:null,xianoptions:[],xiangoptions:[],cunoptions:[],bufferDis:0,biaoHuiIndex:1,daoRuIndex:1,drawDataList:[],checkedIds:[],checkAllF:!1,checkedXzqhWkt:"",imgInfo:{name:"",smMimeType:"",fanw:0,shuj:0,fenbianlv:"",shujDate:"",kongjiancank:""},xzqMianji:0,sumArea:0}},watch:{propData:function(e,t){console.log("右侧组件展示",e)}},computed:{},created(){console.log("右侧组件展示初始化",this.propData)},mounted:function(){},methods:{loadXZQ(){GeoDataAnalyApi.getXian().then(e=>{this.xianoptions=e.data.result})},xianChange(e){this.xiang="",this.cun="",this.xiangoptions=[],this.cunoptions=[],GeoDataAnalyApi.getNextXzqh(e).then(e=>{this.xiangoptions=e.data.result}),GeoDataAnalyApi.getXzqhGeojson(e).then(e=>{if(e.data.result){let t=JSON.parse(e.data.result);addTempGeoJson(g_config.globalviewer,OL_CommonTools.createGeojsonByFeatures([t])),this.xzqMianji=calcAreaByGeojson(t),this.checkedXzqhWkt=geojsonToWkt(t)}})},xiangChange(e){this.cun="",this.cunoptions=[],GeoDataAnalyApi.getNextXzqh(e).then(e=>{}),GeoDataAnalyApi.getXzqhGeojson(e).then(e=>{if(e.data.result){let t=JSON.parse(e.data.result);addTempGeoJson(g_config.globalviewer,OL_CommonTools.createGeojsonByFeatures([t])),this.xzqMianji=calcAreaByGeojson(t),this.checkedXzqhWkt=geojsonToWkt(t)}})},cunChange(e){},openHzfw(){this.openhzfw=!this.openhzfw},openXzqh(){this.openxzqh=!this.openxzqh,this.resetXzqh()},resetXzqh(){this.xian="",this.xiang="",this.cun="",this.xiangoptions=[],this.cunoptions=[],this.checkedXzqhWkt="",this.xzqMianji=0,removeGeoJsonDataSource("3d-vector-templayer",g_config.globalviewer)},closeXzqh(){this.openxzqh=!1,this.resetXzqh()},judgeBufferDis(){return!(isNaN(this.bufferDis)||Number(this.bufferDis)<=0)||(this.utils.opeNotify("","top-center","输入有误，请重新输入！","3500","error"),this.bufferDis=0,!1)},checkAll(e){e?(this.checkedIds=[],this.drawDataList.forEach(e=>{this.checkedIds.push(e.id)})):this.checkedIds=[]},drawPoint(){if(0!=this.bufferDis){this.utils.opeNotify("","top-center","提示：左键单击开始绘制，双击结束绘制！","3500","info");var e="绘制"+this.biaoHuiIndex,t="BH"+this.biaoHuiIndex;this.biaoHuiIndex++,createNewDataSource(g_config.globalviewer,"draw-buffer-entities"),startBHPointCreateOne(g_config.globalviewer,e,t,a=>{g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0].entities.add(a.tempEntity);let i=[a.list[0].lon,a.list[0].lat],s=turf.point(i),o=turf.buffer(s,parseFloat(this.bufferDis),{units:"meters"}),r=o.geometry.coordinates,n=r[0],l=pointsToDegreesArray(n);addBufferPolygon(g_config.globalviewer,Cesium.Cartesian3.fromDegreesArray(l),t,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0]);var c=[];n.forEach(e=>{var t={lon:e[0],lat:e[1]};c.push(t)});var d=parseFloat(geovisArea(c,!0)/1e4).toFixed(4);const p={id:t,type:"面",name:e,area:d,jwd:n};this.drawDataList.push(p)})}else this.utils.opeNotify("","top-center","请输入缓冲区距离！","3500","warning")},drawLine(){if(0!=this.bufferDis){this.utils.opeNotify("","top-center","提示：左键单击开始绘制，双击结束绘制！","3500","info");var e="绘制"+this.biaoHuiIndex,t="BH"+this.biaoHuiIndex;this.biaoHuiIndex++,createNewDataSource(g_config.globalviewer,"draw-buffer-entities"),startBHLineCreate(g_config.globalviewer,e,t,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0],a=>{var i=a;let s=[];i.forEach(e=>{let t=[parseFloat(e.lon),parseFloat(e.lat)];s.push(t)});let o=pointsToDegreesArray(s),r=turf.lineString(s),n=turf.buffer(r,parseFloat(this.bufferDis),{units:"meters"}),l=n.geometry.coordinates;s=l[0],o=pointsToDegreesArray(s),addBufferPolygon(g_config.globalviewer,Cesium.Cartesian3.fromDegreesArray(o),t,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0]);var c=[];s.forEach(e=>{var t={lon:e[0],lat:e[1]};c.push(t)});var d=parseFloat(geovisArea(c,!0)/1e4).toFixed(4);const p={id:t,type:"面",name:e,area:d,jwd:s};this.drawDataList.push(p)})}else this.utils.opeNotify("","top-center","请输入缓冲区距离！","3500","warning")},drawPolygon(){this.utils.opeNotify("","top-center","提示：左键单击开始绘制，双击结束绘制！","3500","info");var e="绘制"+this.biaoHuiIndex,t="BH"+this.biaoHuiIndex;this.biaoHuiIndex++,createNewDataSource(g_config.globalviewer,"draw-buffer-entities"),startBHPolygonCreate(g_config.globalviewer,t,e,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0],a=>{var i=[],s=a;let o=[];s.forEach(e=>{let t=[parseFloat(e.lon),parseFloat(e.lat)];o.push(t)}),o.push(o[0]);let r=pointsToDegreesArray(o);if(0!=this.bufferDis){let e=turf.polygon([o]),a=turf.buffer(e,parseFloat(this.bufferDis),{units:"meters"}),i=a.geometry.coordinates;o=i[0],r=pointsToDegreesArray(o),addBufferPolygon(g_config.globalviewer,Cesium.Cartesian3.fromDegreesArray(r),t,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0])}o.forEach(e=>{var t={lon:e[0],lat:e[1]};i.push(t)});const n={id:t,type:"面",name:e,area:this._.round(geovisArea(i,!0)/1e4,4),jwd:o};this.drawDataList.push(n)})},drawPointGV(){0!=this.bufferDis?(this.utils.opeNotify("","top-center","提示：左键单击开始绘制!","3500","info"),g_config.globalviewer.graphicLayer.setEditorLabelVisible(!1),g_config.globalviewer.graphicLayer.create({id:"BH"+this.biaoHuiIndex,type:"PointGraphic",size:5,color:"#005BFF"},g_config.globalviewer.graphicLayer.getRoot(),e=>{console.log("绘制点结束"+e);var t="绘制"+this.biaoHuiIndex,a="BH"+this.biaoHuiIndex;this.biaoHuiIndex++;let i=[e.position.lon,e.position.lat],s=turf.point(i),o=turf.buffer(s,parseFloat(this.bufferDis),{units:"meters"}),r=o.geometry.coordinates,n=r[0],l=this.addBufferPolygonGV(n),c=n.map(e=>e);c.push(c[0]);let d=this.addBufferPolylineGV(c),p=this.addBufferLabel(e.position.lon,e.position.lat,t);g_config.globalviewer.graphicLayer.add(l),g_config.globalviewer.graphicLayer.add(d),g_config.globalviewer.graphicLayer.add(p);var h=[];n.forEach(e=>{var t={lon:e[0],lat:e[1]};h.push(t)});var g=parseFloat(geovisArea(h,!0)/1e4).toFixed(4);const u={id:a,type:"面",name:t,area:g,jwd:n,graphGroup:[e,l,d,p]};this.drawDataList.push(u)})):this.utils.opeNotify("","top-center","请输入缓冲区距离！","3500","warning")},drawLineGV(){0!=this.bufferDis?(this.utils.opeNotify("","top-center","提示：左键单击开始绘制，双击结束绘制！","3500","info"),g_config.globalviewer.graphicLayer.setEditorLabelVisible(!1),g_config.globalviewer.graphicLayer.create({id:"BH"+this.biaoHuiIndex,type:"PolylineGraphic",lineStyle:new GV.ColorStyle({color:"#005BFF"}),width:3,clampToGround:!0},g_config.globalviewer.graphicLayer.getRoot(),e=>{var t="绘制"+this.biaoHuiIndex,a="BH"+this.biaoHuiIndex;this.biaoHuiIndex++;let i=[];e.positions.forEach(e=>{let t=[parseFloat(e.lon),parseFloat(e.lat)];i.push(t)});let s=turf.lineString(i),o=turf.buffer(s,parseFloat(this.bufferDis),{units:"meters"}),r=o.geometry.coordinates;i=r[0];let n=this.addBufferPolygonGV(i),l=i.map(e=>e);l.push(l[0]);let c=this.addBufferPolylineGV(l),d=this.addBufferLabel(i[0][0],i[0][1],t);g_config.globalviewer.graphicLayer.add(n),g_config.globalviewer.graphicLayer.add(c),g_config.globalviewer.graphicLayer.add(d);var p=[];i.forEach(e=>{var t={lon:e[0],lat:e[1]};p.push(t)});var h=parseFloat(geovisArea(p,!0)/1e4).toFixed(4);const g={id:a,type:"面",name:t,area:h,jwd:i,graphGroup:[e,n,c,d]};this.drawDataList.push(g)})):this.utils.opeNotify("","top-center","请输入缓冲区距离！","3500","warning")},drawPolygonGV(){this.utils.opeNotify("","top-center","提示：左键单击开始绘制，双击结束绘制！","3500","info"),g_config.globalviewer.graphicLayer.setEditorLabelVisible(!1),g_config.globalviewer.graphicLayer.create({id:"BH"+this.biaoHuiIndex,type:"PolygonGraphic",clampToGround:!0,color:"rgba(0,60,255,0.66)"},g_config.globalviewer.graphicLayer.getRoot(),e=>{var t="绘制"+this.biaoHuiIndex,a="BH"+this.biaoHuiIndex;this.biaoHuiIndex++;let i=[];var s=[];e.positions.forEach(e=>{let t=[parseFloat(e.lon),parseFloat(e.lat)];i.push(t)});let o=i.map(e=>e);o.push(o[0]);let r=this.addBufferPolylineGV(o),n=this.addBufferLabel(i[0][0],i[0][1],t);g_config.globalviewer.graphicLayer.add(r),g_config.globalviewer.graphicLayer.add(n);let l=null,c=null;if(0!=this.bufferDis){let e=turf.polygon([o]),t=turf.buffer(e,parseFloat(this.bufferDis),{units:"meters"}),a=t.geometry.coordinates;i=a[0],l=this.addBufferPolygonGV(t.geometry.coordinates[0]),c=this.addBufferPolylineGV(t.geometry.coordinates[0]),g_config.globalviewer.graphicLayer.add(l),g_config.globalviewer.graphicLayer.add(c)}i.forEach(e=>{var t={lon:e[0],lat:e[1]};s.push(t)}),0==this.bufferDis&&i.push(i[0]);const d={id:a,type:"面",name:t,area:this._.round(geovisArea(s,!0)/1e4,4),jwd:i,graphGroup:[e,r,l,c,n]};this.drawDataList.push(d)})},dingweiEntity(e){if(e.indexOf("BH")>-1){let t=g_config.globalviewer.graphicLayer.getById(e);g_config.globalviewer.camera.setView({destination:Cesium.Cartesian3.fromDegrees(t.getCenterPosition().lon,t.getCenterPosition().lat,25e3),orientation:{heading:0,pitch:-Cesium.Math.PI_OVER_TWO,roll:0}})}else{let t=g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0].entities.getById(e);g_config.globalviewer.zoomTo(t,{heading:0,pitch:-Cesium.Math.PI_OVER_TWO,roll:0})}},removeEntities(){this.checkedIds.length>0?this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.checkedIds.forEach(e=>{this.drawDataList.map((t,a)=>{t.id===e&&(t.graphGroup.forEach(e=>{g_config.globalviewer.graphicLayer.remove(e)}),this.drawDataList.splice(a,1))})}),g_config.globalviewer.dataSources.getByName("draw-buffer-entities").length>0&&removeEntitiesByIds(g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0],this.checkedIds),this.checkedIds=[],this.checkAllF=!1}):this.utils.opeNotify("","top-center","请选择数据！","3500","warning")},handleCheckedCitiesChange(e,t){e?(this.checkedIds.push(t),this.checkedIds.length==this.drawDataList.length&&(this.checkAllF=!0)):(this.checkedIds.map((e,a)=>{e===t&&this.checkedIds.splice(a,1)}),this.checkAllF=!1)},closeBox(){this.BCUtil.closeBoxComponent(),this.leave()},handleClick(e,t){console.log(e,t)},async queryFeatures(){this.fullscreenLoading=!0;let e={datauuid:this.propData.dpId,epsg:this.propData.smGridSet.replace("EPSG:",""),wktStr:"",pageNum:1,pageSize:4};if(""!=this.checkedXzqhWkt)e.wktStr=this.checkedXzqhWkt;else{if(!(this.checkedIds.length>0))return this.utils.opeNotify("","top-center","请选择数据进行分析！","3500","warning"),void(this.fullscreenLoading=!1);e.wktStr=this.returnDrawWkt()}1==this.sp_radio?this.intersect(e):this.contain(e)},showImgDia(){if(""!=this.checkedXzqhWkt)this.imgInfo.fanw=this.xzqMianji;else{if(!(this.checkedIds.length>0))return this.utils.opeNotify("","top-center","请选择数据进行分析！","3500","warning"),void(this.fullscreenLoading=!1);this.checkedIds.forEach(e=>{let t=this.drawDataList.find(t=>t.id==e);this.imgInfo.fanw+=t.area})}console.log(this.propData),this.imgInfo.name=this.propData.smName,this.imgInfo.smMimeType=this.propData.dpFormat,this.imgInfo.shuj=this.propData.dpSize,this.imgInfo.fenbianlv=this.propData.resolution,this.imgInfo.shujDate=this.propData.gatherTime,this.imgInfo.kongjiancank=this.propData.smGridSet,this.dialogVisible=!0},exportImg(){let e={wktEpsg:this.propData.smGridSet.replace("EPSG:",""),wktList:""};if(""!=this.checkedXzqhWkt)e.wktList=this.checkedXzqhWkt;else{if(!(this.checkedIds.length>0))return this.utils.opeNotify("","top-center","请选择数据进行分析！","3500","warning"),void(this.fullscreenLoading=!1);e.wktList=[this.returnDrawWkt()]}console.log(e),this.fullscreenLoading=!0,GeoDataAnalyApi.imageCrop(this.propData.dpId,e).then(e=>{200==e.data.status?(this.fullscreenLoading=!1,this.utils.opeNotify("","top-center","正在导出中,可至任务日志查看详情！","3500","info"),setTimeout(()=>{this.dialogVisible=!1},1e3)):(this.fullscreenLoading=!1,console.error(e.data))})},returnDrawWkt(){let e=[];this.checkedIds.forEach(t=>{let a=this.drawDataList.find(e=>e.id==t);e.push(turf.polygon([a.jwd]))});let t=turf.featureCollection(e);var a=turf.combine(t);return geojsonToWkt(a.features[0].geometry)},intersect(e){GeoDataAnalyApi.intersect(e).then(t=>{if(console.log(t),200==t.status){let a=JSON.parse(t.data.result);a?(this.exportData(a,e.wktStr),this.fullscreenLoading=!1):(this.utils.opeNotify("","top-center","未查询到相关要素!","3500","warning"),this.fullscreenLoading=!1)}})},contain(e){GeoDataAnalyApi.include(e).then(t=>{if(t){let a=JSON.parse(t.data.result);a?(this.exportData(a,e.wktStr),this.fullscreenLoading=!1):(this.utils.opeNotify("","top-center","未查询到相关要素!","3500","warning"),this.fullscreenLoading=!1)}})},exportData(e,t){this.showExportDia(),this.queryResult.name=this.propData.smName,this.queryResult.spatial=this.propData.smGridSet,this.queryResult.id=this.propData.dpId,this.queryResult.tableData=[],this.queryResult.geojsonList=e,e.features.forEach(e=>{this.queryResult.tableData.push(e.properties)}),this.exportOption={dpId:this.propData.dpId,wktEpsg:this.propData.smGridSet.replace("EPSG:",""),type:"",wktList:[t],bufferSize:0,param:"1=1",analyseType:1==this.sp_radio?"intersection":"contain"}},showExportDia(){this.$refs.exportDia.show()},uploadFile(e){this.loading=!0;let t=new FormData;t.append("file",e.file),GeoDataAnalyApi.uploadSHP(t).then(t=>{if(console.log(t),200==t.status){createNewDataSource(g_config.globalviewer,"draw-buffer-entities"),this.utils.opeNotify("","top-center",e.file.name+"导入成功！","3500","success");let a=JSON.parse(t.data.result);console.log(a),a.features.length>0&&(a.features.forEach(e=>{var t="导入"+this.daoRuIndex,a="DR"+this.daoRuIndex;this.daoRuIndex++;let i=e.geometry.coordinates[0],s=i[0],o=[];s.forEach(e=>{var t={lon:e[0],lat:e[1]};o.push(t)});const r={id:a,type:"面",name:t,area:this._.round(geovisArea(o,!0)/1e4,4),jwd:s,graphGroup:[]};this.drawDataList.push(r);let n=pointsToDegreesArray(s),l=new Cesium.Entity({name:t,id:a,polygon:{hierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(n)),material:Cesium.Color.fromCssColorString("#005BFF").withAlpha(.5),outline:!0,outlineColor:Cesium.Color.BLACK},polyline:{positions:Cesium.Cartesian3.fromDegreesArray(n),width:3,material:Cesium.Color.fromCssColorString("#005BFF"),clampToGround:!0},label:{text:t,font:"30pt monospace",style:Cesium.LabelStyle.FILL,fillColor:Cesium.Color.WHITE,scale:.5,showBackground:!0,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,pixelOffset:new Cesium.Cartesian2(0,-30),backgroundColor:new Cesium.Color(.5,.6,1,1)}});var c=l.polygon.hierarchy.getValue(Cesium.JulianDate.now()).positions,d=Cesium.BoundingSphere.fromPoints(c).center;d=Cesium.Ellipsoid.WGS84.scaleToGeodeticSurface(d),l.position=d,g_config.globalviewer.dataSources.getByName("draw-buffer-entities")[0].entities.add(l)}),this.loading=!1)}else this.loading=!1,this.utils.opeNotify("","top-center","导入失败！","3500","error")})},handleChange(e,t){t.length>1&&t.splice(0,1)},addBufferPolygonGV(e){return new GV.PolygonGraphic({positions:this.returnGVList(e),color:"rgba(181,208,255,0.4)",clampToGround:!0})},addBufferPolylineGV(e){return new GV.PolylineGraphic({positions:this.returnGVList(e),lineStyle:new GV.ColorStyle({color:"rgb(98,148,243)"}),width:2,arcType:GV.ArcTypeEnum.Geodesic,clampToGround:!0})},addBufferLabel(e,t,a){return new GV.LabelGraphic({position:new GV.GeoPoint(e,t,200),text:a,showBackground:!0,backgroundColor:"#8099FF",heightReference:"relative_to_ground",scaleByDistance:[1e5,.5,500,1]})},returnGVList(e){let t=[];return e.map(e=>{t.push(new GV.GeoPoint(e[0],e[1]))}),t},handleClose(){this.dialogVisible=!1},leave(){g_config.globalviewer.graphicLayer.clear(),g_config.globalviewer.graphicLayer.off("create",null),removeGeoJsonDataSource("3d-vector-templayer",g_config.globalviewer),removeGeoJsonDataSource("draw-buffer-entities",g_config.globalviewer),this.shpWkt="",this.openhzfw=!1,this.openxzqh=!0,this.xian=null,this.xiang=null,this.cun=null,this.xianoptions=[],this.xiangoptions=[],this.cunoptions=[],this.bufferDis=0,this.biaoHuiIndex=1,this.daoRuIndex=1,this.drawDataList=[],this.checkedIds=[],this.checkAllF=!1,this.checkedXzqhWkt=""}},components:{ExportLayerDialog:g}},f=u,b=(a("535b"),a("94bb"),Object(p["a"])(f,i,s,!1,null,"9c1c8f12",null));t["default"]=b.exports},aedf:function(e,t,a){e.exports=a.p+"static/img/export-setting-topbtn-hzfwclose.64aec4ef.png"},bab2:function(e,t,a){"use strict";var i=a("b775"),s=a("f121"),o=a("1a78");class r extends o["a"]{getVectorAnalyse(e){return Object(i["b"])(s["a"].geodataanalyseUrl+"/getVectorAnalyseByDpId/",e)}getOnlyKey(e,t){return Object(i["b"])(s["a"].geodataanalyseUrl+`/getOnlyKey/${e}/${t}`)}page(e,t){return Object(i["c"])(s["a"].geodataanalyseUrl+`/page/${t.pageNum}/${t.pageSize}`,e)}intersect(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/intersect/${e.datauuid}/geojson/p/${e.pageNum}/s/${e.pageSize}`,e)}include(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/include/${e.datauuid}/geojson/p/${e.pageNum}/s/${e.pageSize}`,e)}getfieldAndvalue(e,t){return Object(i["b"])(s["a"].geodataanalyseUrl+`/getfieldAndvalue/${e}/${t}`)}delete(e,t){return Object(i["a"])(s["a"].geodataanalyseUrl+`/delete/${e}/${t}`)}uploadSHP(e){return Object(i["c"])(s["a"].bigdataURL+"/map/importShape",e)}getXian(){return Object(i["c"])(s["a"].geodataanalyseUrl+"/region/xian")}getNextXzqh(e){return Object(i["c"])(s["a"].geodataanalyseUrl+"/region/xz/"+e)}getXzqhGeojson(e){return Object(i["c"])(s["a"].geodataanalyseUrl+"/region/limit/"+e)}imageCrop(e,t){return Object(i["c"])(s["a"].bigdataURL+"/dm_dmbaseproperties/gdalWarp/"+e,t)}vectorCrop(e){return Object(i["c"])(s["a"].bigdataURL+"/dm_dmbaseproperties/vectorWarp/"+e.dpId,e)}calcIntersectCount(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/intersect/${e.datauuid}/count`,e)}calcIntersectArea(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/intersect/${e.datauuid}/area`,e)}calcIncludeCount(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/include/${e.datauuid}/count`,e)}calcIncludeArea(e){return Object(i["c"])(s["a"].geodataanalyseUrl+`/include/${e.datauuid}/area`,e)}}t["a"]=new r(s["a"].geodataanalyseUrl)},beea:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAUNJREFUOE/N1T9LQlEYx/HvYzeokDCUgrK2aIj2wKV3UEMvoMEhKAiiqMXJoSKwxTa3ppaWXoAtQquCQdAkFnjV/iEVdPWJdCm93K43B89+PvwO5zm/I+m0GsF5K64qURFCeFiqVEQ0Vc0bMcmZ9QPQfQ+OzRY5lGzJKntN1i42k+ZMS3uTrqX0B7hXhKuakAgrEf/v83Wd8K0BkVtpKmtBZWv8H2DFgo2CMDmoLAzD6hiMDngE7z5gvSCsBJTNtlQ/SVdHvq7B7r2wM6EsB5xn4k/w4hlOSsLxlLLYdgF2tCOYNOHyRUhOK7ND7qa1A3ytw/kT3LzDw6dwOqOEDHeY7WAnSnD22BqLzJwy4nOP2YKZGmwXhSW/chTuDuufp+eUW7KmVRa8FWtHfdGsrx4XbOsLaMQVjXpNqt/JkFQ174t9ARFMmdzpKUJtAAAAAElFTkSuQmCC"},e006:function(e,t,a){"use strict";var i=a("b775"),s=a("f121"),o=a("1a78");class r extends o["a"]{getDmServiceUrl(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getDmServiceUrl/"+e)}getDmService(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getDmService/"+e)}getDmServiceFilter(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getDmServiceFilter/",e)}getVectorAnalyse(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getVectorAnalyseByDpId/",e)}publishVector(e){return Object(i["c"])(this.apiUrl+"/vector/publish",e)}publishVectorIServer(e){return Object(i["c"])(this.apiUrl+"/vector/publishIServer",e)}getProgress(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getProgress/"+e)}getMapDmServiceUrl(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/getMapDmServiceUrl/"+e)}sendYunZhongXin(e){return Object(i["b"])(s["a"].bigdataURL+"/dm_dmbaseproperties/sendYunZhongXin/",e)}updateDmPropertyField(e){return Object(i["c"])(this.apiUrl+"/updateDmPropertyField",e)}deleteByDpid(e){return Object(i["c"])(s["a"].bigdataURL+"/dm_dmbaseproperties/delete",e)}}t["a"]=new r(s["a"].bigdataURL+"/dm_dmbaseproperties")},eceb:function(e,t,a){},f9e5:function(e,t,a){}}]);